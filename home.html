<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <title>Home</title>
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css">
      <!--This function directs the cursor to the comment box-->
      <script type="text/javascript">
         function setFocus()
         {
            document.getElementById("comment").focus(); 
         }
      </script>
      <!--For input validation, red error messages appear below forms-->
      <style>
         .error {
         color: red; 
         font-style: italic;
         }
      </style>
   </head>
   <!--Custom external style sheet-->
   <link rel="stylesheet" href="styles/mystyle.css" />
   <body>
      <h1>ALPHA SIGMA PHI</h1>
      <h2>
         Zeta Upsilon Chapter 
         <div class="5u 12u(medium)">
            <img src="images/asig.jpg" width="300px" height="300px">
         </div>
      </h2>
      <h3>University of Virginia</h3>
      <!--Jumbotron banner displays toolbar with link to each page on the site-->
      <div class="jumbotron">
         <div class="container">
            <div id="todo">
               <table id="todoTable" class="table" >
                  <thead>
                     <tr>
                        <th><input type="button" onclick="location.href='home.html';"class="btn btn-primary" id="home" value="Home"/></th>
                        <th><input type="button" class="btn btn-primary" id="about" value="About"/></th>
                        <th><input type="button" class="btn btn-primary" id="photos" value="Photos"/></th>
                        <th><input type="button" class="btn btn-primary" id="reviews" value="Reviews"/></th>
                        <th><input type="button" class="btn btn-primary" id="contactUs" value="Contact Us"/></th>
                        <th><input type="button" onclick="location.href='donate.html';"class="btn btn-primary" id="donate" value="Donate"/></th>
                        <th><input type="button" class="btn btn-primary" id="signIn" value="Sign In" onclick="location.href='login.html';"/></th>
                        <th><input type="button" class="btn btn-primary" id="help" value="Help"/></th>
                     </tr>
                  </thead>
               </table>
            </div>
         </div>
      </div>
      </div>
      <div class="container">
         <h1>News</h1>
         <p>We are excited to announce our partnership with Chipotle to promote brain cancer research. This Monday, 3/18/19,
            from 5-9PM, 1/3 of all profits made by the Chipotle on Barracks Road will be donated to The American Brain 
            Tumor Association at no additional cost to you. Please come and support the cause!
         </p>
         <h2>Comments</h2>
         <!--Comment section is a table-->
         <div id="commentSection">
            <table id="comments" class="table" >
               <thead>
                  <tr>
                     <th>Name</th>
                     <th>Comment</th>
                     <th>Date</th>
                     <th>Remove</th>
                  </tr>
               </thead>
            </table>
         </div>
         <!--Tracks number of comments in log-->
         <p>Comment count</p>
         <p id="count"></p>
         <br></br>
         <!--Form for adding user comments-->
         <form name="mainform" >
            <div class="form-group">
               <label for="comment">Write a comment</label>
               <input type="text" id="comment" class="form-control" name="userComment" contenteditable="true"/>
               <span class="error" id="comment-note"></span>
            </div>
            <div class="form-group">
               <label for="comment">Name</label>
               <input type="text" id="name" class="form-control" name="userName" contenteditable="true"/>
               <span class="error" id="name-note"></span>
            </div>
            <!--When the comment is posted, call addRow function to insert row in comment log-->
            <input type="button" class="btn btn-light" id="add" value="Post Comment" onclick="addRow()"/> 
         </form>
         <br/>
      </div>
      <br/> 
      <hr/>
      <script>
         function addRow()
             {
             var comm = document.getElementById("comment").value;
             var name = document.getElementById("name").value;
             var date = new Date();
             var dd = String(date.getDate()).padStart(2, '0');
             var mm = String(date.getMonth() + 1).padStart(2, '0'); //January is 0!
             var yyyy = date.getFullYear();
             date = mm + '/' + dd + '/' + yyyy;
             
            //Contents of each row
             var removeoption = "<input type=button value=' X ' onClick='delRow()'>";
             var rowdata = [name, comm, date, removeoption];
            //Input validation
             if (comm === '')
             {
                 document.getElementById("comment").focus();
                 document.getElementById("comment-note").innerHTML = "Please enter a comment";
             } 
             if (name === '')
             {
                 document.getElementById("name-note").innerHTML = "Please enter your name";
             } 
            //Clear error messages
             if (name !== '') {
                 document.getElementById("name-note").innerHTML = "";
             }
             if (comm !== '') {
                 document.getElementById("comment-note").innerHTML = "";
             }
             //If both fields are filled
             if (name !== '' && comm !== '')
             {
                 var tableRef = document.getElementById("comments");
             
                 var newRow = tableRef.insertRow(tableRef.rows.length);
                 
                //Anonymous function
                 newRow.onmouseover = function() { 
                     tableRef.clickedRowIndex = this.rowIndex;     
                 };    
                 
                 var newCell = "";       
                 var i = 0;
                 	      
                 while (i < 4)
                 {
                     newCell = newRow.insertCell(i);
                     newCell.innerHTML = rowdata[i];
                     newCell.onmouseover = this.rowIndex;
                     i++;
                 }
                 document.getElementById("comment").value = '';
                 document.getElementById("name").value = '';
             }
             //Arrow function
             var tableLength = () => document.getElementById("comments").rows.length - 1; 
             document.getElementById("count").innerHTML = tableLength();
             console.log(document.getElementById("comments").rows.length - 1);
                 
         }  
      </script>
      <script>
         //Delete row in comment log
          function delRow()
          {
              if (confirm("Are you sure you want to delete?") == true)   
                  document.getElementById("comments").deleteRow(document.getElementById("comments").clickedRowIndex);
         
              var tableLength = () => document.getElementById("comments").rows.length - 1; 
              document.getElementById("count").innerHTML = tableLength();
              //For testing
              console.log(document.getElementById("comments").rows.length - 1);    
          }
      </script>
      </script>
   </body>
</html>